default:

  gherkin:
    cache: "%paths.base%/var/cache/behat/behat_gherkin"
    filters:
      tags: ~@wip

  autoload:
    - "%paths.base%/tests/behat/bootstrap"

  formatters:
    pretty:
      output_styles:
        comment: [ white, black ]
  calls:
    error_reporting: 16383 # E_ALL & ~E_USER_DREPRECATED

  testers:
    rerun_cache: "%paths.base%/var/cache/behat/behat_rerun"

  extensions:
    DMore\ChromeExtension\Behat\ServiceContainer\ChromeExtension: ~
    Lakion\Behat\MinkDebugExtension:
      directory: var/log/behat-reports
      screenshot: true
    Behat\MinkExtension:
      base_url: http://localhost:8088
      goutte: ~
      browser_name: chrome
      default_session: session_for_tests
      javascript_session: session_for_tests
      sessions:
        goutte: ~
        session_for_tests:
          chrome:
            api_url: http://localhost:9222
            validate_certificate: false
    Behatch\Extension: ~

  suites:
    default:
      filters:
        tags: "~@wip"
      contexts:
        - Behatch\Context\JsonContext
        - Behatch\Context\TableContext
        - behatch:context:browser: #include Behatch\Context\BrowserContext and override default timeout
            timeout: 5
        - Context\CommonContext
      paths: [ "%paths.base%/tests/api", "%paths.base%/tests/e2e"]
